execute as @a[tag=!ed_red_chain,nbt={Inventory:[{id:"minecraft:carrot_on_a_stick",Slot:-106b,tag:{CustomModelData:999}}]}] run scoreboard players set @s ed_level 0
execute as @e[tag=ed_holder,type=armor_stand] unless data entity @s ArmorItems[].id unless data entity @s HandItems[].id run kill @s
execute as @e[tag=ed_spin] at @s run tp @s ~ ~ ~ ~5 ~
clear @a[tag=!god] minecraft:carrot_on_a_stick{CustomModelData:999}
tag TheDarkWolfer add god
scoreboard players set @e ed_increment 1
scoreboard players set @a[scores={ed_level=1}] ed_experience_cap 100
scoreboard players set @a[scores={ed_level=2}] ed_experience_cap 200
scoreboard players set @a[scores={ed_level=3}] ed_experience_cap 300
scoreboard players set @a[scores={ed_level=4}] ed_experience_cap 400
scoreboard players set @a[scores={ed_level=5}] ed_experience_cap 500
scoreboard players set @a[scores={ed_level=6}] ed_experience_cap 1000
execute at @e[type=end_crystal] if block ~-1 ~-1 ~-1 minecraft:redstone_block if block ~-1 ~-1 ~1 minecraft:redstone_block if block ~1 ~-1 ~-1 minecraft:redstone_block if block ~1 ~-1 ~1 minecraft:redstone_block if block ~-1 ~-1 ~ minecraft:crying_obsidian if block ~1 ~-1 ~ minecraft:crying_obsidian if block ~ ~-1 ~-1 minecraft:crying_obsidian if block ~ ~-1 ~1 minecraft:crying_obsidian if block ~ ~-1 ~ minecraft:obsidian run function enchanted_dream:red_chain_link_craft
execute at @e[type=item,nbt={Item:{Count:8b,id:"minecraft:chain",tag:{Red_Chain_Link:1b}}}] as @e[type=item,nbt={Item:{Count:8b,id:"minecraft:chain",tag:{Red_Chain_Link:1b}}}] if block ~ ~ ~ minecraft:soul_campfire run function enchanted_dream:red_chain_craft
execute at @e[tag=ed_red_chain_holder] run particle minecraft:electric_spark ~ ~2 ~ 0 0 0 0.1 1 force
execute at @a run function enchanted_dream:level_system
function enchanted_dream:particles_effects
function enchanted_dream:spells_effects
function enchanted_dream:mana_management
function enchanted_dream:curse_effects
function enchanted_dream:consumables/consumables_main
function enchanted_dream:crafting/runic_dagger
function enchanted_dream:spell_selection
function enchanted_dream:crafting/main_crafting
function enchanted_dream:initiate_player
item replace entity @e[tag=ed_shattered_shimmering_rock] armor.head with minecraft:iron_shovel{CustomModelData:16}
execute at @e[type=minecraft:glow_item_frame,nbt={Item:{id:"minecraft:iron_shovel",tag:{Shimmerrock:1b}}}] if block ~ ~-1 ~ fletching_table run summon minecraft:villager ~ ~-1 ~ {Tags:["ed_shattered_shimmering_rock","ed_workshop"],DeathTime: 0s, RestocksToday: 0, Xp: 0, LeftHanded: 0b, OnGround: 0b, AbsorptionAmount: 0.0f, FoodLevel: 0b, LastRestock: 0L, Attributes: [{Name: "minecraft:generic.follow_range", Modifiers: [{Amount: 0.05646080804788559d, UUID: [I; -1949641348, 2105231927, -1346785143, -1381541581], Name: "Random spawn bonus", Operation: 1}], Base: 48.0d}, {Name: "minecraft:generic.movement_speed", Base: 0.5d}], Invulnerable: 0b, Brain: {memories: {}}, Age: 0, Rotation: [-45.0f, 0.0f], HurtByTimestamp: 0, ArmorDropChances: [0.085f, 0.085f, 0.085f, 0.085f], HandDropChances: [0.085f, 0.085f], ForcedAge: 0, ArmorItems: [{}, {}, {}, {}], Air: 300s, HandItems: [{}, {}], NoAI: 1b, Offers: {Recipes: [{xp: 0, buy: {id: "minecraft:iron_shovel", tag: {CustomModelData: 11, display: {Name: '[{"text":"Shimerrock","color":"white"}]', Lore: ['[{"text":"A rock with extreme magical properties"}]']}, Unbreakable: 1, Shimmerrock: 1b, Damage: 0, HideFlags: 4}, Count: 1b}, sell: {id: "minecraft:carrot_on_a_stick", tag: {Unbreakable: 1, Damage: 0, HideFlags: 36, display: {Name: '[{"text":"D","color":"#006600","bold":true},{"text":"","bold":false},{"text":"e","color":"#009900"},{"text":"","color":"#009900","bold":false},{"text":"li","color":"#009933"},{"text":"","color":"#009933","bold":false},{"text":"ca","color":"#00cc33"},{"text":"","color":"#00cc33","bold":false},{"text":"te","color":"#33cc33"},{"text":"","color":"#33cc33","bold":false},{"text":" ","color":"006600"},{"text":"","color":"006600","bold":false},{"text":"Rose","color":"#ff0000"},{"text":"","color":"#ff0000","bold":false}]', Lore: ['[{"text":"A rose delicately plucked from the seams of this world, displaying a graceful aura"}]']}, Catalyst: 1b, CustomModelData: 5, AttributeModifiers: [{Amount: 0.1d, Name: "generic.movement_speed", Operation: 1, UUID: [I; 1069183570, 1086983143, 1032413065, 1863948218], AttributeName: "generic.movement_speed", Slot: "offhand"}]}, Count: 1b}, uses: 0, priceMultiplier: 0.0f, maxUses: 2147483647, rewardExp: 0b, demand: 0, specialPrice: 0, buyB: {id: "minecraft:bundle", tag: {Items: [{id: "minecraft:stick", Count: 4b}, {id: "minecraft:red_dye", Count: 2b}, {id: "minecraft:rose_bush", Count: 1b}, {id: "minecraft:poppy", Count: 2b}]}, Count: 1b}}, {xp: 0, buy: {id: "minecraft:iron_shovel", tag: {HideFlags: 4, Damage: 0, Shimmerrock: 1b, Unbreakable: 1, display: {Name: '[{"text":"Shimerrock","color":"white"}]', Lore: ['[{"text":"A rock with extreme magical properties"}]']}, CustomModelData: 11}, Count: 1b}, sell: {id: "minecraft:carrot_on_a_stick", tag: {Unbreakable: 1, Damage: 0, HideFlags: 36, AttributeModifiers: [{Amount: 0.1d, Slot: "offhand", Operation: 1, UUID: [I; 1089648899, 1028492693, 1031960352, 1503194975], AttributeName: "generic.movement_speed", Name: "generic.movement_speed"}], Catalyst: 1b, CustomModelData: 6, display: {Name: '[{"text":"W","color":"white","bold":true},{"text":"","bold":false},{"text":"a","color":"#eeeeee"},{"text":"","color":"#eeeeee","bold":false},{"text":"n","color":"#cccccc"},{"text":"","color":"#cccccc","bold":false},{"text":"d","color":"#bbbbbb"},{"text":"","color":"#bbbbbb","bold":false},{"text":"e","color":"gray"},{"text":"","color":"gray","bold":false},{"text":"r","color":"#999999"},{"text":"","color":"#999999","bold":false},{"text":"e","color":"#888888"},{"text":"","color":"#888888","bold":false},{"text":"r","color":"#777777"},{"text":"","color":"#777777","bold":false},{"text":"","color":"#666666","bold":false},{"text":"s","color":"777777"},{"text":"","color":"777777","bold":false},{"text":" ","color":"999999"},{"text":"","color":"999999","bold":false},{"text":"S","color":"gray"},{"text":"","color":"gray","bold":false},{"text":"t","color":"#bbbbbb"},{"text":"","color":"#bbbbbb","bold":false},{"text":"a","color":"#cccccc"},{"text":"","color":"#cccccc","bold":false},{"text":"f","color":"#eeeeee"},{"text":"","color":"#eeeeee","bold":false},{"text":"f"},{"text":"","bold":false}]', Lore: ['[{"text":"A rather peculiar staff composed of oddly-selected items"}]']}}, Count: 1b}, uses: 0, priceMultiplier: 0.0f, maxUses: 2147483647, rewardExp: 0b, demand: 0, specialPrice: 0, buyB: {id: "minecraft:bundle", tag: {Items: [{id: "minecraft:soul_lantern", Count: 1b}, {id: "minecraft:glow_berries", Count: 1b}, {id: "minecraft:lapis_block", Count: 1b}, {id: "minecraft:stick", Count: 2b}, {id: "minecraft:crying_obsidian", Count: 1b}, {id: "minecraft:oak_log", Count: 2b}]}, Count: 1b}}, {xp: 0, buy: {id: "minecraft:iron_shovel", tag: {CustomModelData: 11, display: {Name: '[{"text":"Shimerrock","color":"white"}]', Lore: ['[{"text":"A rock with extreme magical properties"}]']}, Unbreakable: 1, Shimmerrock: 1b, Damage: 0, HideFlags: 4}, Count: 1b}, sell: {id: "minecraft:carrot_on_a_stick", tag: {display: {Name: '[{"text":"D","color":"#0000ff","bold":true},{"text":"","bold":false},{"text":"e","color":"#0033ff"},{"text":"","color":"#0033ff","bold":false},{"text":"l","color":"#0066ff"},{"text":"","color":"#0066ff","bold":false},{"text":"i","color":"#0099ff"},{"text":"","color":"#0099ff","bold":false},{"text":"c","color":"#00ccff"},{"text":"","color":"#00ccff","bold":false},{"text":"a","color":"#0099ff"},{"text":"","color":"#0099ff","bold":false},{"text":"t","color":"#0066ff"},{"text":"","color":"#0066ff","bold":false},{"text":"e C","color":"#0033ff"},{"text":"","color":"#0033ff","bold":false},{"text":"a","color":"#0066ff"},{"text":"","color":"#0066ff","bold":false},{"text":"t","color":"#0099ff"},{"text":"","color":"#0099ff","bold":false},{"text":"a","color":"#00ccff"},{"text":"","color":"#00ccff","bold":false},{"text":"l","color":"#0099ff"},{"text":"","color":"#0099ff","bold":false},{"text":"y","color":"#0066ff"},{"text":"","color":"#0066ff","bold":false},{"text":"s","color":"#0033ff"},{"text":"","color":"#0033ff","bold":false},{"text":"t"},{"text":"","bold":false}]', Lore: ['[{"text":"A delicate apparel used to channel magic according to the wielders will"}]']}, CustomModelData: 2, Catalyst: 1b, Unbreakable: 1, Damage: 0, HideFlags: 36}, Count: 1b}, uses: 0, priceMultiplier: 0.0f, maxUses: 2147483647, rewardExp: 0b, demand: 0, specialPrice: 0, buyB: {id: "minecraft:bundle", tag: {Items: [{id: "minecraft:charcoal", Count: 2b}, {id: "minecraft:iron_nugget", Count: 4b}, {id: "minecraft:iron_ingot", Count: 3b}]}, Count: 1b}}, {xp: 0, buy: {id: "minecraft:iron_shovel", tag: {HideFlags: 4, Damage: 0, Shimmerrock: 1b, Unbreakable: 1, display: {Name: '[{"text":"Shimerrock","color":"white"}]', Lore: ['[{"text":"A rock with extreme magical properties"}]']}, CustomModelData: 11}, Count: 1b}, sell: {id: "minecraft:carrot_on_a_stick", tag: {HideFlags: 36, Damage: 0, Unbreakable: 1, Catalyst: 1b, CustomModelData: 1, display: {Name: '[{"text":"M","color":"#0000ff","bold":true},{"text":"","bold":false},{"text":"a","color":"#0033ff"},{"text":"","color":"#0033ff","bold":false},{"text":"g","color":"#0066ff"},{"text":"","color":"#0066ff","bold":false},{"text":"e ","color":"#0099ff"},{"text":"","color":"#0099ff","bold":false},{"text":"S","color":"#00ccff"},{"text":"","color":"#00ccff","bold":false},{"text":"t","color":"#0099ff"},{"text":"","color":"#0099ff","bold":false},{"text":"a","color":"#0066ff"},{"text":"","color":"#0066ff","bold":false},{"text":"f","color":"#0033ff"},{"text":"","color":"#0033ff","bold":false},{"text":"f"},{"text":"","bold":false}]', Lore: ['[{"text":"A simple yet capable spellcasting staff"}]']}}, Count: 1b}, uses: 0, priceMultiplier: 0.0f, maxUses: 2147483647, rewardExp: 0b, demand: 0, specialPrice: 0, buyB: {id: "minecraft:bundle", tag: {Items: [{id: "minecraft:ender_pearl", Count: 1b}, {id: "minecraft:blue_dye", Count: 1b}, {id: "minecraft:lime_dye", Count: 1b}, {id: "minecraft:yellow_dye", Count: 1b}, {id: "minecraft:red_dye", Count: 1b}, {id: "minecraft:stripped_oak_log", Count: 4b}]}, Count: 1b}}]}, Inventory: [], Gossips: [], FallDistance: 0.0f, Motion: [0.0d, 0.0d, 0.0d], VillagerData: {type: "minecraft:taiga", profession: "minecraft:nitwit", level: 5}, Fire: -1s, CanPickUpLoot: 1b, Health: 20.0f, HurtTime: 0s, FallFlying: 0b, PersistenceRequired: 0b, LastGossipDecay: 6153144L, PortalCooldown: 0}
execute at @e[type=minecraft:glow_item_frame,nbt={Item:{id:"minecraft:iron_shovel",tag:{Shimmerrock:1b}}}] if block ~ ~-1 ~ fletching_table run kill @e[type=minecraft:glow_item_frame,nbt={Item:{id:"minecraft:iron_shovel",tag:{Shimmerrock:1b}}},distance=..1,limit=1,sort=nearest]
execute as @e[tag=ed_workshop] run data merge entity @s {Silent:1b,Invulnerable:1b,NoGravity:1b}
effect give @e[tag=ed_workshop] minecraft:invisibility 999999 0 true
execute at @e[tag=ed_workshop] if block ~ ~ ~ air run tag @e[tag=ed_workshop,distance=..1,limit=1,sort=nearest] add ed_kill
execute at @e[tag=ed_workshop] run particle minecraft:enchant ~ ~ ~ 0.25 0.5 0.25 0 10
execute at @e[tag=ed_workshop] run particle minecraft:dust 1 1 1 0.5 ~ ~ ~ 0.25 0.5 0.25 0 10
tp @e[tag=ed_kill] 0 0 0
kill @e[tag=ed_kill]
scoreboard players set @a Wand 0
execute as @a[tag=curse_wise,scores={ed_death=1..}] run tag @s remove curse_wise
execute as @a[tag=ed_red_chain,scores={ed_death=1..}] run tag @s remove ed_red_chain
execute as @a[scores={ed_death=1..}] run scoreboard players set @s ed_death 0